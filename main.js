!function(){"use strict";class e{constructor(e,t){let{name:s,link:n,handleImageClick:o}=e;this._name=s,this._link=n,this._cardSelector=t,this._handleImageClick=o}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this.cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})})),this._cardElement.querySelector(".card__trash-button").addEventListener("click",(()=>{this._handleRemoveCard()}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleRemoveCard(){this._cardElement.remove(),this._cardElement=null}_getElement(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getElement(),this.cardImageEl=this._cardElement.querySelector(".card__image"),this.cardTitleEl=this._cardElement.querySelector(".card__title"),this.cardImageEl.src=this._link,this.cardImageEl.alt=`Photo of ${this._name}`,this.cardTitleEl.textContent=this._name,this._setEventListeners(),this._cardElement}}const t=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],s={formSelector:".modal__form",inputSelector:".form__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"popup__error_visible"};class n{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputElements=[...t.querySelectorAll(this._inputSelector)],this._submitButton=t.querySelector(this._submitButtonSelector),this._element=t}_showInputError(e){const t=this._element.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._element.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e,document.querySelector(`#${e.id}-error`));this._hideInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e,this._element),this.toggleButtonState()}))}))}enableValidation(){this._element.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class o{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){console.log(this),this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{console.log(this),"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class r extends o{constructor(e,t){super({popupSelector:e}),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form")}close(){super.close(),this._popupForm.reset()}_getInputValues(){const e=this._popupForm.querySelectorAll(".form__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}}const i=document.querySelector("#profile-edit-button"),l=document.querySelector("#profile-edit-modal"),a=document.querySelector("#preview-image-modal"),c=(a.querySelector(".modal__image"),a.querySelector(".modal__title"),document.querySelector("#add-card-modal")),u=document.querySelector(".profile__title"),d=document.querySelector(".profile__description"),m=document.querySelector("#profile-title-input"),_=document.querySelector("#profile-description-input"),h=l.querySelector(".modal__form"),p=c.querySelector(".modal__form"),E=document.querySelector(".profile__add-button"),v=new n(s,p),g=new n(s,h);v.enableValidation(),g.enableValidation();const S=new r("#add-card-modal",(function(e){const t=k(e);b.addItem(t),p.reset(),S.close()}));S.setEventListeners(),E.addEventListener("click",(()=>{v.toggleButtonState(),S.open()}));const y=new r("#profile-edit-modal",(function(e){let{name:t,job:s}=e;f.setUserInfo(t,s),y.close()}));y.setEventListeners(),i.addEventListener("click",(()=>{const e=f.getUserInfo();m.value=e.name,_.value=e.job,y.open()}));const L=new class extends o{constructor(e){super({popupSelector:e}),this._imageElement=this._popupElement.querySelector(".modal__image"),this._titleElement=this._popupElement.querySelector(".modal__title")}open(e){this._imageElement.src=e.link,this._imageElement.alt=`Photo of ${e.link}`,this._titleElement.textContent=e.text,super.open()}setEventListeners(){super.setEventListeners()}}("#preview-image-modal");L.setEventListeners();const k=t=>new e({name:t.name,link:t.link,handleImageClick:e=>{L.open(e)}},"#card-template").getView(),b=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:t,renderer:e=>{b.addItem(k(e))}},".cards__list");b.renderItems(t);const f=new class{constructor(e,t){this._name=e,this._job=t}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUserInfo(e,t){this._name.textContent=e,this._job.textContent=t}}(u,d)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxZQUVuQixDQUVBcUYsV0FBQUEsQ0FBWS9HLEVBQU02RyxHQUNoQjFHLEtBQUtDLE1BQU1zQixZQUFjMUIsRUFDekJHLEtBQUsrSCxLQUFLeEcsWUFBY21GLENBQzFCLEdIc0c0QmYsRUFBY0MsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluaywgaGFuZGxlSW1hZ2VDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICAvL2NhcmRTZWxlY3Rvcj0gI2NhcmQtdGVtcGxhdGVcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7IC8vdGVtcGxhdGVcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcbiAgICAgIH0pO1xuICAgIHRoaXMuY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soe1xuICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxuICAgICAgICBsaW5rOiB0aGlzLl9saW5rLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvL1wiLmNhcmRfX3RyYXNoLWJ1dHRvblwiXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUNhcmQoKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cbiAgX2hhbmRsZVJlbW92ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG4gIF9nZXRFbGVtZW50KCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRFbGVtZW50KCk7XG4gICAgdGhpcy5jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5jYXJkVGl0bGVFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgdGhpcy5jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuY2FyZEltYWdlRWwuYWx0ID0gYFBob3RvIG9mICR7dGhpcy5fbmFtZX1gO1xuICAgIHRoaXMuY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIC8vZ2V0IHRoZSBjYXJkIHZpZXdcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIC8vIHJldHVybiBjYXJkXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIGNhcmRTZWN0aW9uOiBcIi5jYXJkc19fbGlzdFwiLFxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgcHJldmlld01vZGFsOiBcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIsXG59O1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gW1xuICAgICAgLi4uZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcbiAgICBdO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKFxuICAgICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgfVxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxuICAgICk7XG4gIH1cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL2RhdGEgdyBpbiBrZXlib2FyZCBcImtleWRvd25cIlwia2V5dXBcIiBldGNcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQsIHRoaXMuX2VsZW1lbnQpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgLy9wbGF5cyByb2xsIG9mIGluaXQgbWV0aG9kKHB1YmxpYylcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cbiAgb3BlbigpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XG4gICAgY29uc29sZS5sb2codGhpcyk7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsKGV2dCk9PntcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcblxyXG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuLy9pbmRleC5qc1xyXG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcblxuLy9pbXBvcnQgYWxsIHRoZSBjbGFzc2VzXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHNlbGVjdG9ycywgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuLy9FbGVtZW50c1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZSA9IHByZXZpZXdJbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuY29uc3QgcHJldmlld0ltYWdlTW9kYWxUaXRsZSA9IHByZXZpZXdJbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RpdGxlXCIpO1xuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbi8vIGNvbnN0IHByb2ZpbGVFZGl0Q2xvc2VCdXR0b24gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuLy8gY29uc3QgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4vLyBjb25zdCBwcmV2aWV3SW1hZ2VNb2RhbENsb3NlQnV0dG9uID1cbi8vICAgcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbi8vIGNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuLy8gY29uc3QgY2FyZFRlbXBsYXRlID1cbi8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuLy8gY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtLWlucHV0LXRpdGxlXCIpO1xuLy8gY29uc3QgY2FyZFVybElucHV0ID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybS1pbnB1dC11cmxcIik7XG5cbmZ1bmN0aW9uIGhhbmRsZXJQcm9maWxlRWRpdFN1Ym1pdCh7IG5hbWUsIGpvYiB9KSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5hbWUsIGpvYik7XG4gIGVkaXRDYXJkUG9wdXAuY2xvc2UoKTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGlucHV0VmFsdWVzKTtcbiAgY2FyZExpc3QuYWRkSXRlbShjYXJkKTtcbiAgYWRkQ2FyZEZvcm1FbGVtZW50LnJlc2V0KCk7XG4gIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGRhdGEpIHtcbiAgcHJldmlld0ltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgcHJldmlld0ltYWdlLmFsdCA9IGBQaG90byBvZiAke2RhdGEubmFtZX1gO1xuICBwcmV2aWV3SW1hZ2VNb2RhbFRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkUHJldmlld01vZGFsLm9wZW4oKTtcbn1cblxuLy9uZXcgaW5zdGFuY2VzXG5cbi8vZm9ybSB2YWxpZGF0aW9uIGluc3RhbmNlXG5jb25zdCBhZGRDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhZGRDYXJkRm9ybUVsZW1lbnQpO1xuY29uc3QgYWRkRWRpdFByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHByb2ZpbGVFZGl0Rm9ybSk7XG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEVkaXRQcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbi8vbmV3IGNhcmQgaW5zdGFuY2VcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNhZGQtY2FyZC1tb2RhbFwiLFxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxuKTtcblxubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZENhcmRWYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuLy9lZGl0IGNhcmRzIGluc3RhY2VcbmNvbnN0IGVkaXRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZXJQcm9maWxlRWRpdFN1Ym1pdFxuKTtcblxuZWRpdENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlPSB1c2VyRGF0YS5uYW1lO1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZT0gdXNlckRhdGEuam9iO1xuICBlZGl0Q2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL3ByZXZpZXcgaW1hZ2UgaW5zdGFuY2VcbmNvbnN0IGNhcmRQcmV2aWV3TW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoc2VsZWN0b3JzLnByZXZpZXdNb2RhbCk7XG5jYXJkUHJldmlld01vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkRWwgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICBsaW5rOiBkYXRhLmxpbmssXG4gICAgICBoYW5kbGVJbWFnZUNsaWNrOiAoaW1nRGF0YSkgPT4ge1xuICAgICAgICBjYXJkUHJldmlld01vZGFsLm9wZW4oaW1nRGF0YSk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZVxuICApO1xuXG4gIHJldHVybiBjYXJkRWwuZ2V0VmlldygpO1xufTtcbi8vIHNlY3Rpb24gaW5zdGFuY2VcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcbiAgICB9LFxuICB9LFxuICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cbik7XG5jYXJkTGlzdC5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMpO1xuLy91c2VyaW5mbyBpbnN0YW5jZVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZVRpdGxlLCBwcm9maWxlRGVzY3JpcHRpb24pO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fdGl0bGVFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RpdGxlXCIpO1xuICB9XG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IGBQaG90byBvZiAke2RhdGEubGlua31gO1xuICAgIHRoaXMuX3RpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEudGV4dDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICAvL3VzZSB0aGlzLl9yZW5kZXJlciB0byBjcmVhdGUgZWxlbWVudHMgZm9yIHJlbmRlcmluZ1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgLy90YWtlIGl0ZW1zIGFuZCByZW5kZXIgaXQgaW50byB0aGlzLl9lbGVtZW50XG5cbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBqb2IpIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9qb2IgPSBqb2I7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwibmFtZSIsImxpbmsiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsImNhcmRJbWFnZUVsIiwiX2hhbmRsZVJlbW92ZUNhcmQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfZ2V0RWxlbWVudCIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJjYXJkVGl0bGVFbCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiaW5pdGlhbENhcmRzIiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2lucHV0RWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9lbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlZCIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY29uc29sZSIsImxvZyIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcmV2aWV3SW1hZ2VNb2RhbCIsImFkZENhcmRNb2RhbCIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdEZvcm0iLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJhZGROZXdDYXJkQnV0dG9uIiwiYWRkQ2FyZFZhbGlkYXRvciIsImFkZEVkaXRQcm9maWxlVmFsaWRhdG9yIiwibmV3Q2FyZFBvcHVwIiwiY2FyZCIsImNyZWF0ZUNhcmQiLCJjYXJkTGlzdCIsImFkZEl0ZW0iLCJlZGl0Q2FyZFBvcHVwIiwiam9iIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJjYXJkUHJldmlld01vZGFsIiwiX2ltYWdlRWxlbWVudCIsIl90aXRsZUVsZW1lbnQiLCJkYXRhIiwidGV4dCIsImltZ0RhdGEiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJfam9iIl0sInNvdXJjZVJvb3QiOiIifQ==